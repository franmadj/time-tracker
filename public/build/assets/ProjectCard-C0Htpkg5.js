import{h as N,k as m,z as oe,T as O,o as g,f as y,b as t,e as i,t as u,d,n as w,i as p,C as x,a,v as R,w as v,F as se,u as r,m as j,D as le,q as ae}from"./app-DPnApB4g.js";import{_ as q,a as G,D as re}from"./DangerButton-CoxAGWRV.js";import{S as ne}from"./SaveButton-Du63H9Xn.js";import{_ as h,a as V,b}from"./TextInput-Z2BqUOoq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ce=t("path",{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"},null,-1),ie=[ce],de=t("path",{d:"M170.5 51.6L151.5 80h145l-19-28.4c-1.5-2.2-4-3.6-6.7-3.6H177.1c-2.7 0-5.2 1.3-6.7 3.6zm147-26.6L354.2 80H368h48 8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-8V432c0 44.2-35.8 80-80 80H112c-44.2 0-80-35.8-80-80V128H24c-13.3 0-24-10.7-24-24S10.7 80 24 80h8H80 93.8l36.7-55.1C140.9 9.4 158.4 0 177.1 0h93.7c18.7 0 36.2 9.4 46.6 24.9zM80 128V432c0 17.7 14.3 32 32 32H336c17.7 0 32-14.3 32-32V128H80zm80 64V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16z"},null,-1),ue=[de],pe={class:"text-white font-bold mb-2 max-w-[288px]"},me={class:"mb-1"},he={class:"flex"},_e={class:"f w-[224px]"},fe={class:"mb-1"},ve={class:"block"},ge={class:"mb-1"},ye={class:""},we={class:"mb-1 underline cursor-pointer"},xe={class:"w-[102px]"},je={class:"flex items-center gap-2 justify-end mb-2"},be=["id"],ke={class:"flex items-center gap-2 justify-end mb-2"},Ve=t("path",{d:"M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"},null,-1),Ce=[Ve],Me=t("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"},null,-1),Te=[Me],He={class:"p-6"},De=t("h2",{class:"text-lg font-medium text-gray-900"}," Edit Project ",-1),ze={class:"mt-6"},Se={class:"mt-6"},Be={class:"mt-6"},Le={class:"relative w-3/4"},Ne={class:"absolute right-2 top-[9px]"},Pe={class:"mt-6"},Ue={class:"relative w-3/4"},$e={class:"absolute right-2 top-[9px]"},Ie={class:"mt-6"},Ee={class:"flex gap-2 items-center w-3/4"},Ke={class:""},Ae={class:"mt-6 flex justify-end"},Fe={class:"p-6"},Oe=t("h2",{class:"text-lg font-medium text-gray-900"}," Are you sure you want to delete this proyect? ",-1),Re=t("p",{class:"mt-1 text-sm text-gray-600"}," This proyect and all its time history will be deleted. ",-1),qe={class:"mt-6 flex justify-end"},Ye={__name:"ProjectCard",props:{project:{type:Object},client:{type:Object},index:{type:Number}},emits:["delete:project","update:project"],setup(c,{emit:J}){const s=c,P=N(()=>s.project),C=m(!1),U=m(!1),k=m("00:00:00");let $=1,M=0;const Q=m(!1),T=J;oe(()=>{console.log("project",s.project),X()});const W=N(()=>l.extra_time>0?(l.extra_time/60).toFixed(2):0),I=N(()=>A(P.value.total_time)),X=()=>{s.project.time_started&&E(!0),s.project.total_time&&(Q.value=s.project.total_time)},E=(n=!1)=>{if(C.value=!0,n){M=s.project.time_id;const o=new Date(s.project.time_started);K(o);return}k.value="00:00:00";const e=new Date;axios.post(route("project.startTime",s.project.id),{startedAt:e.toUTCString()}).then(o=>{o.data.success&&o.data.id>0&&(M=o.data.id,K(e))}).catch(function(o){})},Y=()=>{C.value=!1,clearInterval($);const n=new Date;axios.post(route("timeTable.stopTime",M),{stoppedAt:n.toUTCString()}).then(e=>{console.log(e),e.data.success&&(console.log(e.data.project.total_time),P.value.total_time=e.data.project.total_time)}).catch(function(e){})},K=n=>{$=setInterval(()=>{const o=new Date().getTime()-n.getTime(),f=Math.round(o/1e3);k.value=A(f)},1e3)},A=n=>{let e=Math.floor(n/3600),o=Math.floor(n%(60*60)/60),f=Math.floor(n%60/1);return e=(e<10?"0":"")+e,o=(o<10?"0":"")+o,f=(f<10?"0":"")+f,e+":"+o+":"+f},H=m(!1),F=O({name:""}),Z=()=>{H.value=!0},ee=()=>{axios.delete(route("project.destroy",s.project.id)).then(n=>{n.data.success&&(T("delete:project",s.index),D())}).catch(function(n){})},D=()=>{H.value=!1},z=m(null),S=m(!1);let l;const te=()=>{l=O({name:s.project.name,hourly_rate:String(s.project.hourly_rate),hourly_rate_two:String(s.project.hourly_rate_two),notes:s.project.notes,extra_time:s.project.extra_time,client_slug:s.client.slug}),S.value=!0,ae(()=>z.value.focus())},_=()=>{l.put(route("project.update",s.project.id),{preserveScroll:!0,onSuccess:()=>{T("update:project"),B()},onError:()=>{z.value.focus(),T("update:project")}})},B=()=>{S.value=!1,l.reset()},L=n=>{console.log(route("project.prioroty",s.project.id)),axios.patch(route("project.prioroty",s.project.id),{prioroty:n}).then(e=>{e.data.success&&(s.project.prioroty=n)}).catch(function(e){})};return(n,e)=>(g(),y(se,null,[t("div",null,[(g(),y("svg",{onClick:i(te,["stop"]),class:"absolute right-8 top-3 w-4 h-4 cursor-pointer fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},ie)),(g(),y("svg",{onClick:i(Z,["stop"]),class:"absolute right-3 top-3 w-4 h-4 cursor-pointer fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},ue)),t("h2",pe,u(c.project.name),1),t("p",me,[d("Prioroty: "),t("span",{onClick:e[0]||(e[0]=i(o=>L("high"),["stop"])),class:w(["cursor-pointer",{"text-red-500":s.project.prioroty=="high"}])},"High",2),d(" / "),t("span",{onClick:e[1]||(e[1]=i(o=>L("middle"),["stop"])),class:w(["cursor-pointer",{"text-yellow-500":s.project.prioroty=="middle"}])},"Middle",2),d(" / "),t("span",{onClick:e[2]||(e[2]=i(o=>L("low"),["stop"])),class:w(["cursor-pointer",{"text-green-500":s.project.prioroty=="low"}])},"Low",2)]),t("div",he,[t("div",_e,[p(t("p",fe,[d("Prdiod from: "),t("span",ve,u(c.project.period_from),1)],512),[[x,c.project.period_from]]),p(t("p",{class:"mb-1"},"Ended At: "+u(c.project.ended_at),513),[[x,c.project.ended_at]]),p(t("p",ge,[d("Total time: "),t("span",ye,u(I.value),1)],512),[[x,I.value]]),p(t("p",we,"Time Table",512),[[x,c.project.earnings]])]),t("div",xe,[t("div",je,[a(h,{for:"selected-"+c.project.id,value:"selected",class:"text-white text-sm font-light leading-5",onClick:e[3]||(e[3]=i(()=>{},["stop"]))},null,8,["for"]),p(t("input",{type:"checkbox",id:"selected-"+c.project.id,"onUpdate:modelValue":e[4]||(e[4]=o=>c.project.selected=o),onClick:e[5]||(e[5]=i(()=>{},["stop"]))},null,8,be),[[R,c.project.selected]])]),t("div",ke,[a(h,{for:"ended",value:"ended",class:"text-white text-sm font-light leading-5",onClick:e[6]||(e[6]=i(()=>{},["stop"]))}),p(t("input",{type:"checkbox",id:"ended","onUpdate:modelValue":e[7]||(e[7]=o=>U.value=o),onClick:e[8]||(e[8]=i(()=>{},["stop"]))},null,512),[[R,U.value]])]),p(t("p",{class:"mb-1 text-right"},u(k.value),513),[[x,k.value]])])]),C.value?(g(),y("svg",{key:0,onClick:i(Y,["stop"]),class:"absolute right-3 bottom-3 w-8 h-8 cursor-pointer fill-red-400 hover:fill-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},Ce)):(g(),y("svg",{key:1,onClick:e[9]||(e[9]=i(o=>E(!1),["stop"])),class:"absolute right-3 bottom-3 w-8 h-8 cursor-pointer fill-green-400 hover:fill-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},Te))]),a(q,{show:S.value,onClose:B},{default:v(()=>[t("div",He,[De,t("div",ze,[a(h,{for:"name",value:"name",class:"sr-only"}),a(V,{id:"name",ref:"projectNameInput",modelValue:r(l).name,"onUpdate:modelValue":e[10]||(e[10]=o=>r(l).name=o),type:"text",class:"mt-1 block w-3/4",placeholder:"Project Name",onKeyup:j(_,["enter"])},null,8,["modelValue"]),a(b,{message:r(l).errors.name,class:"mt-2"},null,8,["message"])]),t("div",Se,[a(h,{for:"notes",value:"notes",class:"sr-only"}),p(t("textarea",{id:"notes",ref_key:"editNameInput",ref:z,"onUpdate:modelValue":e[11]||(e[11]=o=>r(l).notes=o),type:"text",class:"mt-1 block w-3/4 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"Project Name",onKeyup:j(_,["enter"])},null,544),[[le,r(l).notes]]),a(b,{message:r(l).errors.notes,class:"mt-2"},null,8,["message"])]),t("div",Be,[a(h,{for:"hourly_rate",value:"hourly_rate",class:"sr-only"}),t("div",Le,[t("span",Ne,u(s.client.currency)+" / Hour",1),a(V,{id:"hourly_rate",modelValue:r(l).hourly_rate,"onUpdate:modelValue":e[12]||(e[12]=o=>r(l).hourly_rate=o),type:"text",class:"mt-1 block w-3/4",placeholder:"Hourly Rate",onKeyup:j(_,["enter"])},null,8,["modelValue"])]),a(b,{message:r(l).errors.hourly_rate,class:"mt-2"},null,8,["message"])]),t("div",Pe,[a(h,{for:"hourly_rate_two",value:"hourly rate two",class:"sr-only"}),t("div",Ue,[t("span",$e,u(s.client.currency)+" / Hour",1),a(V,{id:"hourly_rate_two",modelValue:r(l).hourly_rate_two,"onUpdate:modelValue":e[13]||(e[13]=o=>r(l).hourly_rate_two=o),type:"text",class:"mt-1 block w-3/4",placeholder:"Second Hourly Rate",onKeyup:j(_,["enter"])},null,8,["modelValue"])]),a(b,{message:r(l).errors.hourly_rate_two,class:"mt-2"},null,8,["message"])]),t("div",Ie,[a(h,{for:"extra_time",value:"extra_time",class:"sr-only"}),t("div",Ee,[a(V,{id:"extra_time",modelValue:r(l).extra_time,"onUpdate:modelValue":e[14]||(e[14]=o=>r(l).extra_time=o),type:"text",class:"mt-1 block w-32",placeholder:"Extra Minutes",onKeyup:j(_,["enter"])},null,8,["modelValue"]),t("span",Ke,[d("Minutes / "),t("b",null,u(W.value),1),d(" Hours")])]),a(b,{message:r(l).errors.extra_time,class:"mt-2"},null,8,["message"])]),t("div",Ae,[a(G,{onClick:B},{default:v(()=>[d(" Close ")]),_:1}),a(ne,{class:w(["ms-3",{"opacity-25":r(l).processing}]),disabled:r(l).processing,onClick:_},{default:v(()=>[d(" Save ")]),_:1},8,["class","disabled"])])])]),_:1},8,["show"]),a(q,{show:H.value,onClose:D},{default:v(()=>[t("div",Fe,[Oe,Re,t("div",qe,[a(G,{onClick:D},{default:v(()=>[d(" Close ")]),_:1}),a(re,{class:w(["ms-3",{"opacity-25":r(F).processing}]),disabled:r(F).processing,onClick:ee},{default:v(()=>[d(" Delete Project ")]),_:1},8,["class","disabled"])])])]),_:1},8,["show"])],64))}};export{Ye as default};
